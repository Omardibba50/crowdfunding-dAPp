import { type ProtobufStream } from 'it-protobuf-stream';
import { HopMessage, StopMessage } from '../pb/index.js';
import { type ReservationStoreInit } from './reservation-store.js';
import type { CircuitRelayService, RelayReservation } from '../index.js';
import type { ComponentLogger, Connection, Stream, ConnectionGater, PeerId, PeerStore } from '@libp2p/interface';
import type { AddressManager, ConnectionManager, Registrar } from '@libp2p/interface-internal';
export interface CircuitRelayServerInit {
    /**
     * Incoming hop requests must complete within this time in ms otherwise
     * the stream will be reset (default: 30s)
     */
    hopTimeout?: number;
    /**
     * Configuration of reservations
     */
    reservations?: ReservationStoreInit;
    /**
     * The maximum number of simultaneous HOP inbound streams that can be open at once
     */
    maxInboundHopStreams?: number;
    /**
     * The maximum number of simultaneous HOP outbound streams that can be open at once
     */
    maxOutboundHopStreams?: number;
    /**
     * The maximum number of simultaneous STOP outbound streams that can be open at
     * once. (default: 300)
     */
    maxOutboundStopStreams?: number;
}
export interface HopProtocolOptions {
    connection: Connection;
    request: HopMessage;
    stream: ProtobufStream<Stream>;
}
export interface StopOptions {
    connection: Connection;
    request: StopMessage;
}
export interface CircuitRelayServerComponents {
    registrar: Registrar;
    peerStore: PeerStore;
    addressManager: AddressManager;
    peerId: PeerId;
    connectionManager: ConnectionManager;
    connectionGater: ConnectionGater;
    logger: ComponentLogger;
}
export interface RelayServerEvents {
    'relay:reservation': CustomEvent<RelayReservation>;
    'relay:advert:success': CustomEvent<unknown>;
    'relay:advert:error': CustomEvent<Error>;
}
export declare function circuitRelayServer(init?: CircuitRelayServerInit): (components: CircuitRelayServerComponents) => CircuitRelayService;
//# sourceMappingURL=index.d.ts.map